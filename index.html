
<!-- My scene -->
	
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Aim Trainer</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
		<canvas id="myCanvas"></canvas>
<!--
  I created a collection of small examples in Three.js to understand very quickly the purpose of some functions.
  You can visit the 'website' of the entire collection of pens here : http://mamboleoo.be/learnThree/

  You can also see the collection in CodePen
  https://codepen.io/collection/DrxLEd/

  Do not hesitate to comment if there is something wrong (I'm still learning)

  Thanks !
-->

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js"></script>
<script>


//Get the height and the width of the window
var ww = window.innerWidth,
	wh = window.innerHeight;


function init(){


	/* WEBGL RENDERER */
	renderer = new THREE.WebGLRenderer();
	renderer.setClearColor(0  );
	renderer.setSize(ww,wh);
	document.body.appendChild( renderer.domElement );

	/* SCENE */
	scene = new THREE.Scene();

	/* CAMERA */
	camera = new THREE.PerspectiveCamera(50, ww/wh, 1, 10000 );
	camera.position.set(50, 300	, 700);
	camera.lookAt(new THREE.Vector3(0,0,0));
	//const controls = new THREE.PointerLockControls(camera)
	scene.add(camera);


	/* LIGHT */
	light = new THREE.DirectionalLight(0xffffff, 1);
	light.position.set( 0, 500, 500 );
	scene.add(light);


	
	//Create all our shapes
	window.ui = document.getElementById('myCanvas')
	ui.width = window.innerWidth;
	ui.height = window.innerHeight;
	window.ctx = ui.getContext('2d')

	planes();
	createShapes();
	createBox();
	window.addEventListener("Onmousedown", onmousedown);
	//Render the scene

	renderer.render(scene,camera);
	animate();
	
	
};
//function render(){
//	renderer.render(scene,camera);

//}
function animate() {
	requestAnimationFrame( animate );
	renderer.render(scene,camera);
	ctx.clearRect(0,0,ui.width,ui.height)
	ctx.fillStyle = 'white'
	ctx.strokeStyle = 'black'
	ctx.fillRect((ui.width/2)-2.5,ui.height/2-2.5,5,5)
	ctx.strokeRect((ui.width/2)-2.5,ui.height/2-2.5,5,5)

	};
	



function planes(){
	var axis = new THREE.Vector3(1.1,0,-0.03);
	const planematerial =  new THREE.MeshLambertMaterial({color: 10000000});
	const geometryplane = new THREE.PlaneGeometry(1590,500,0);
	const plane = new THREE.Mesh(geometryplane,planematerial);
	scene.add(plane);
	plane.position.set(-50,-250,0);
	plane.rotateOnAxis(axis,80);

}
function createShapes(){

	const circlematerial =  new THREE.MeshBasicMaterial({color:0x00ff00,wireframe:true});
	const geometrySphere = new THREE.SphereGeometry(50,20,20);
	const circle = new THREE.Mesh(geometrySphere, circlematerial);
	//Random function for spawning the target
	circle.position.set(Math.random()*450-Math.random()*700,Math.random()*300-Math.random()*200,Math.random()*200);
	//variable for axis

	
	
	//Function to rotate the plane about the x-axis
	

	scene.add(circle);

};
function createBox(){

	//3d object that contains all my cubes
	spheres = new THREE.Object3D();

	geometry = new THREE.SphereGeometry(50,50,20);
	texture = new THREE.MeshLambertMaterial({color:0x00ff00, wireframe:true})
	//Generate 70 random cubes
	for(var i=0;i<2;i++){
		sphere = new THREE.Mesh(geometry, texture);
		//Set random positions
		//cube.rotation.x = (Math.random()-.5)*Math.PI;
		//cube.rotation.y = (Math.random()-.5)*Math.PI;
		//cube.rotation.z = (Math.random()-.5)*Math.PI;

		sphere.position.set(Math.random()*450-Math.random()*700,1,Math.random()*200);

		//Add the new cube in the 3D object
		spheres.add(sphere);
	}

	//Add my cubes in my scene
	scene.add(spheres);
};

document.onmousedown = function(e){
				//document.body.requestPointerLock()
	//We create a 2D vector
	vector = new THREE.Vector2();
	//We set its position where the user clicked and we convert it to a number between -1 & 1
	vector.set(
		2 * (e.clientX / ww) - 1,
		1 - 2 * (e.clientY / wh )
	);

	//We create a raycaster, which is some kind of laser going through your scene
	raycaster = new THREE.Raycaster();
	//We apply two parameters to the 'laser', its origin (where the user clicked) and the direction (what the camera 'sees')
	raycaster.setFromCamera(vector,camera);

	//We get all the objects the 'laser' find on its way (it returns an array containing the objects)
	intersects = raycaster.intersectObjects(spheres.children);

	//If detect that we have at least 1 object
	//The first object in the array is the closest to the camera
	if(intersects.length > 0 ){
		//We apply a random color to the first object
		intersects[0].object.position.set(Math.random()*450-Math.random()*700,1,Math.random()*200);
		intersects[0].object.material = new THREE.MeshLambertMaterial({ color : new THREE.Color('red') } );
};

document.onmousemove = function(e){
			camera.rotateY(-(e.movementX / 1000))
		};
	renderer.render(scene,camera);
	};
//Init our scene
init();

</script>
		<style>
			canvas{
				position: absolute;
				left: 0px;
				top: 0px;
			}
			#myCanvas{
				z-index: 10;
			}
			#size{
				position: absolute;
				top: 30px;
				z-index: 15;
			}
		</style>
		 </body>
</html>
